<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Secret Santa Portal</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap');

        body {
            background: radial-gradient(circle at top right, #2d0a0a 0%, #0a1a0a 100%);
            font-family: 'Inter', sans-serif;
            color: #f3f4f6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .font-cinzel { font-family: 'Cinzel', serif; }

        .glass {
            background: rgba(20, 20, 20, 0.7);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 215, 0, 0.15);
            box-shadow: 0 15px 45px rgba(0, 0, 0, 0.6);
        }

        .christmas-accent {
            background: linear-gradient(135deg, #b91c1c 0%, #7f1d1d 100%);
        }

        .gold-glow {
            box-shadow: 0 0 15px rgba(234, 179, 8, 0.2);
        }

        .gold-text {
            background: linear-gradient(to right, #fde047, #ca8a04);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .portal-glow {
            box-shadow: 0 0 20px rgba(187, 161, 79, 0.2);
            transition: all 0.3s ease;
        }

        .portal-glow:focus {
            box-shadow: 0 0 30px rgba(187, 161, 79, 0.4);
            border-color: rgba(187, 161, 79, 0.5);
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">

    <div id="app" class="w-full max-w-md">
        <!-- View 1: Name Entry -->
        <div id="view-login" class="glass rounded-3xl p-10 text-center fade-in border-t-4 border-red-700">
            <div class="mb-6 flex justify-center">
                <div class="w-16 h-1 bg-gradient-to-r from-transparent via-yellow-500 to-transparent"></div>
            </div>
            <h1 class="font-cinzel text-4xl mb-2 gold-text tracking-widest">Secret Santa</h1>
            <p class="text-xs text-gray-400 mb-10 tracking-[0.2em] uppercase">Enter your name to begin the hunt</p>
            
            <div class="space-y-8">
                <div class="text-left relative">
                    <label class="block text-[10px] uppercase tracking-[0.3em] text-gray-500 mb-3 ml-1 font-bold">Your First Name</label>
                    <input type="text" id="nameInput" 
                        class="w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 outline-none focus:border-yellow-500/50 transition-all text-white font-light tracking-wide">
                </div>
                
                <button onclick="handleLogin()" 
                    class="w-full christmas-accent hover:brightness-125 text-white font-bold py-4 rounded-xl transition-all duration-500 shadow-lg gold-glow uppercase tracking-widest text-sm">
                    Let the Hunt Begin!
                </button>
            </div>
            
            <p id="loginError" class="mt-6 text-red-500 text-[10px] uppercase tracking-widest hidden"></p>
        </div>

        <!-- View 2: Personalized Clue -->
        <div id="view-clue" class="glass rounded-3xl p-10 text-center hidden fade-in border-t-4 border-green-800">
            <div class="mb-4">
                <span class="text-yellow-500 text-2xl">‚ú¶</span>
            </div>
            <h2 class="font-cinzel text-2xl gold-text mb-1"><span id="displayTitle"></span> <span id="displayName"></span></h2>
            <p class="text-[10px] text-gray-500 mb-8 italic tracking-[0.15em] uppercase border-b border-white/5 pb-4">This might be your clue to unlock the secrets ahead</p>
            
            <div class="bg-black/30 rounded-2xl p-8 mb-8 border border-white/5 text-center relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-green-900/50 to-transparent"></div>
                <p id="clueText" class="text-gray-300 text-sm leading-relaxed font-light italic"></p>
            </div>

            <div class="space-y-8">
                <div class="text-left">
                    <label class="block text-[10px] uppercase tracking-[0.3em] text-gray-500 mb-3 ml-1 font-bold">Crafted Answer</label>
                    <input type="password" id="passInput" 
                        class="w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 outline-none focus:border-yellow-500/50 transition-all text-center tracking-[1em] text-white">
                </div>
                
                <button onclick="handleUnlock()" 
                    class="w-full bg-white/10 hover:bg-white/20 text-yellow-500 font-bold py-4 rounded-xl border border-yellow-500/30 transition-all duration-500 uppercase tracking-widest text-sm">
                    Verify your Answer
                </button>
                
                <p id="clueError" class="mt-6 text-red-500 text-[10px] uppercase tracking-widest hidden"></p>
            </div>
            
            <button onclick="logout()" class="mt-10 text-[9px] text-gray-500 hover:text-yellow-500 uppercase tracking-[0.4em] transition-colors border-b border-transparent hover:border-yellow-500/50 pb-1">
                Reset Identity
            </button>
        </div>

        <!-- View 3: Success Reveal -->
        <div id="view-success" class="glass rounded-3xl p-10 text-center hidden fade-in border-t-4 border-yellow-600">
            <div class="mb-8 relative flex justify-center">
                <div class="absolute inset-0 bg-yellow-500/20 blur-3xl rounded-full"></div>
                <span class="text-6xl relative animate-pulse">üóùÔ∏è</span>
            </div>
            <h2 class="font-cinzel text-3xl gold-text mb-4">You found it !</h2>
            <p id="successGreeting" class="text-gray-300 mb-10 leading-relaxed font-light"></p>
            
            <div class="bg-gradient-to-b from-yellow-900/20 to-black/40 border border-yellow-500/30 rounded-2xl p-8 mb-10 shadow-inner">
                <h3 class="text-[10px] uppercase tracking-[0.4em] text-yellow-500/70 mb-4 font-bold">Secret Location</h3>
                <p id="locationText" class="text-xl font-semibold text-white tracking-wide"></p>
            </div>

            <div class="italic text-gray-400 text-sm mb-8 border-t border-white/5 pt-8 font-serif">
                "Small things make big days. Merry Christmas!"
            </div>

            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-600">- Your Secret Santa Or Someone hired me -</p>
            
            <button onclick="logout()" class="mt-10 text-[9px] text-gray-500 hover:text-yellow-500 uppercase tracking-[0.4em] transition-colors border-b border-transparent hover:border-yellow-500/50 pb-1">
                Close Terminal
            </button>
        </div>
    </div>

    <canvas id="snowCanvas" class="fixed top-0 left-0 w-full h-full pointer-events-none z-0"></canvas>

    <script>

        /* -------------------------------
        CALM SNOW EFFECT
        -------------------------------- */

        const canvas = document.getElementById("snowCanvas");
        const ctx = canvas.getContext("2d");

        let width, height;
        let snowflakes = [];

        function resizeCanvas() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
        }
        window.addEventListener("resize", resizeCanvas);
        resizeCanvas();

        function createSnowflakes(count = 80) {
        snowflakes = [];
        for (let i = 0; i < count; i++) {
            snowflakes.push({
            x: Math.random() * width,
            y: Math.random() * height,
            r: Math.random() * 2 + 1,
            speedY: Math.random() * 0.6 + 0.2,
            driftX: Math.random() * 0.2 - 0.1
            });
        }
        }
        createSnowflakes();

        function drawSnow() {
        ctx.clearRect(0, 0, width, height);
        ctx.fillStyle = "rgba(255, 255, 255, 0.7)";
        ctx.beginPath();

        snowflakes.forEach(flake => {
            ctx.moveTo(flake.x, flake.y);
            ctx.arc(flake.x, flake.y, flake.r, 0, Math.PI * 2);
        });

        ctx.fill();
        moveSnow();
        }

        function moveSnow() {
        snowflakes.forEach(flake => {
            flake.y += flake.speedY;
            flake.x += flake.driftX;

            if (flake.y > height) {
            flake.y = -5;
            flake.x = Math.random() * width;
            }

            if (flake.x > width || flake.x < 0) {
            flake.driftX *= -1;
            }
        });
        }

        function animateSnow() {
        drawSnow();
        requestAnimationFrame(animateSnow);
        }
        animateSnow();



        /* -------------------------------
        REGISTRY (Neutral Keys)
        -------------------------------- */
        document.addEventListener('contextmenu', e => e.preventDefault());

        (function () {
        let warned = false;

        setInterval(() => {
            
            console.clear();
            console.warn(
                "%c‚ö†Ô∏è Curiosity Alert ‚ö†Ô∏è\n\nThis game is meant to be solved, not inspected.\nTrust the clues. Enjoy the hunt.",
                "color: gold; font-size: 14px; font-weight: bold;"
            );
            warned = true;
            }, 1000);
        })();

        const registry = {
        "Menaka": {
            t: "Madam",
            c: "Without this, leadership is only a title.",
            k: "TRUST",
            l: "In the third sanctuary of the silent screen, where machines are but a memory and digital ghosts dwell."
        },
        "Pasan": {
            t: "Mr.",
            c: "The answer sits where decisions are made, yet it never decides anything itself.",
            k: "DESK",
            l: "Beneath the place where authority usually rests."
        },
        "Akila": {
            t: "Mr.",
            c: "From the highest place of thought, the answer is the day most often prepared for, not the one that arrives.",
            k: "WEDNESDAY",
            l: "On the upper floor, where silence is measured in pages rather than words."
        },
        "Gihan": {
            t: "Mr.",
            c: "Patience has a color, and that color never rushes.",
            k: "BLUE",
            l: "Behind the shadow cast by the tallest plant we ever know."
        },
        "Shashika": {
            t: "Mrs.",
            c: "The answer hides between yesterday and tomorrow, but never stays.",
            k: "TODAY",
            l: "Beneath the wall that rings hollow when struck."
        },
        "Sameera": {
            t: "Mr.",
            c: "The strongest thing in a room is often the quietest.",
            k: "SILENCE",
            l: "Inside the vessel that holds water but never drinks."
        },
        "Dishan": {
            t: "Mr.",
            c: "You unlock this every morning without a key.",
            k: "PHONE",
            l: "Near the place where cables converge and silent lights speak."
        },
        "Shanaka": {
            t: "Mr.",
            c: "The answer is measured, not counted.",
            k: "TIME",
            l: "Where many paths meet and signals decide their route."
        },
        "Lankeshi": {
            t: "Mrs.",
            c: "It follows you everywhere, yet disappears in darkness.",
            k: "SHADOW",
            l: "At the base of the pillar that feels no weight."
        },
        "Nishani": {
            t: "Ms.",
            c: "The truth appears only when both sides agree.",
            k: "BALANCE",
            l: "Where figures rest after being checked twice."
        },
        "Madhuki": {
            t: "Ms.",
            c: "This is heard before it is understood.",
            k: "ECHO",
            l: "Where the sound of laughter is stored for rainy days."
        },
        "Wajira": {
            t: "Mr.",
            c: "The password is what remains after effort is gone.",
            k: "RESULT",
            l: "Inside the drawer that opens only when you are not looking."
        },
        "Niruni": {
            t: "Ms.",
            c: "The beginning hides the ending.",
            k: "CIRCLE",
            l: "Where shared moments quietly return on themselves."
        },
        "Hiruvinda": {
            t: "Mr.",
            c: "It convinces before it satisfies.",
            k: "OFFER",
            l: "Where promises are poured generously and forgotten just as fast."
        },
        "Chameen": {
            t: "Mr.",
            c: "The answer is built by doing rather than deciding.",
            k: "EXPERIENCE",
            l: "Where the first ray of sunlight touches the floor in the morning."
        },
        "Navodya": {
            t: "Ms.",
            c: "You cannot hold it, but you can lose it.",
            k: "CHANCE",
            l: "Under a seat that faces the setting sun every evening."
        },
        "Tharushi": {
            t: "Ms.",
            c: "The answer feels heavier when shared.",
            k: "TRUTH",
            l: "Wrapped in the silence of the corner that everyone forgets."
        },
        "Dilki": {
            t: "Ms.",
            c: "The password is born from repetition.",
            k: "HABIT",
            l: "Follow the morning bell to their home."
        },
        "Nethma": {
            t: "Ms.",
            c: "The problem becomes clearer only after it is tested.",
            k: "DEBUG",
            l: "Where experiments quietly fail before they finally work."
        },
        "Vinura": {
            t: "Mr.",
            c: "It succeeds only when someone else agrees.",
            k: "DEAL",
            l: "Where conversations quietly turn into commitments."
        },
        "Vihangi": {
            t: "Ms.",
            c: "Meaning often hides between what is written and what is understood.",
            k: "CONTEXT",
            l: "Between the lines that most people read past."
        }
        };

        /* -------------------------------
        RUNTIME SECRET (Not Stored)
        -------------------------------- */

        function resolveSecret(name) {
        
        return {
            key: registry[name].k,
            loc: registry[name].l
        };
        }

        /* -------------------------------
        APP LOGIC
        -------------------------------- */

        let currentName = "";

        window.addEventListener("load", () => {
        const saved = localStorage.getItem("playerName");
        if (saved && registry[saved]) {
            enterClue(saved);
        }
        });

        function showView(id) {
        document.querySelectorAll("#app > div").forEach(d => d.classList.add("hidden"));
        document.getElementById(id).classList.remove("hidden");
        }

        function handleLogin() {
        const input = document.getElementById("nameInput").value.trim();
        const name = Object.keys(registry).find(n => n.toLowerCase() === input.toLowerCase());
        const error = document.getElementById("loginError");

        if (!name) {
            error.innerText = "Identification Failed. Unrecognized User.";
            error.classList.remove("hidden");
            return;
        }

        localStorage.setItem("playerName", name);
        enterClue(name);
        }

        function enterClue(name) {
        currentName = name;
        const p = registry[name];
        document.getElementById("displayTitle").innerText = p.t;
        document.getElementById("displayName").innerText = name;
        document.getElementById("clueText").innerText = p.c;
        showView("view-clue");
        }

        function handleUnlock() {
        const input = document.getElementById("passInput").value.trim().toUpperCase();
        const error = document.getElementById("clueError");
        const secret = resolveSecret(currentName);

        if (input === secret.key) {
            document.getElementById("successGreeting").innerText =
            `Congratulations, ${registry[currentName].t} ${currentName}. You have successfully decoded the path. Happy Hunting!`;

            document.getElementById("locationText").innerText = secret.loc;
            showView("view-success");

            confetti({
            particleCount: 180,
            spread: 90,
            origin: { y: 0.6 }
            });
        } else {
            error.innerText = "You are close. Or maybe very far.";
            error.classList.remove("hidden");
        }
        }

        function logout() {
        localStorage.removeItem("playerName");
        currentName = "";
        document.getElementById("nameInput").value = "";
        document.getElementById("passInput").value = "";
        showView("view-login");
        }

        document.getElementById("nameInput").addEventListener("keypress", e => {
        if (e.key === "Enter") handleLogin();
        });
        document.getElementById("passInput").addEventListener("keypress", e => {
        if (e.key === "Enter") handleUnlock();
        });
    </script>

</body>
</html>